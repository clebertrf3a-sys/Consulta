<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sintrajud - Consulta IRPF</title>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding: 40px; }
        .box { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; }
        
        /* Estilo da Logomarca */
       .logo { 
    max-width: 100%; /* Garante que não ultrapasse a caixa */
    height: auto;    /* Mantém a proporção */
    width: 250px;    /* Define um tamanho fixo elegante */
    margin-bottom: 20px; 
    display: block;  /* Ajuda na centralização */
    margin-left: auto;
    margin-right: auto;
}
        h2 { color: #333; margin-bottom: 20px; font-size: 1.3em; line-height: 1.3; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; font-size: 16px; }
        .btn-group { display: flex; gap: 10px; margin-top: 10px; }
        button { flex: 1; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; font-size: 16px; }
        #btnConsultar { background: #004a99; } /* Azul aproximado do Sintrajud */
        #btnConsultar:hover { background: #003366; }
        #btnLimpar { background: #6c757d; }
        #btnLimpar:hover { background: #5a6268; }
        #res { margin-top: 20px; padding: 15px; border-radius: 5px; display: none; line-height: 1.6; text-align: left; }
        .filiacao-box { margin-top: 15px; padding-top: 15px; border-top: 1px dashed #adb5bd; font-size: 0.9em; color: #444; }
        .filiacao-box a { color: #004a99; font-weight: bold; text-decoration: none; }
        .filiacao-box a:hover { text-decoration: underline; }
    </style>
</head>
<body>

<div class="box">
    



<img src="https://raw.githubusercontent.com/clebertrf3a-sys/Consulta/main/sintrajudlogo.png">
    
    <h2>Consultar Valor de IRPF sobre Abono de Férias</h2>
    
    <input type="text" id="nome" placeholder="Nome Completo">
    <input type="text" id="cpf" placeholder="000.000.000-00" maxlength="14" oninput="mascaraCPF(this)">
    
    <div class="btn-group">
        <button id="btnConsultar" onclick="consultar()">Consultar</button>
        <button id="btnLimpar" onclick="limpar()">Limpar</button>
    </div>
    
    <div id="res"></div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzXTVVPfvHwvjcm65ZaaWQOkQys5zV0TpcrFWntCEWfOseTunzrWtS7A_uVh4Yxp7unWg/exec"; 

    function mascaraCPF(i) {
        let v = i.value;
        v = v.replace(/\D/g, "");
        v = v.replace(/(\d{3})(\d)/, "$1.$2");
        v = v.replace(/(\d{3})(\d)/, "$1.$2");
        v = v.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
        i.value = v;
    }

    async function consultar() {
        const nome = document.getElementById('nome').value.trim();
        let cpfInput = document.getElementById('cpf').value.trim();
        const resDiv = document.getElementById('res');

        if(!nome || !cpfInput) return alert("Por favor, preencha todos os campos.");

        const cpfApenasNumeros = cpfInput.replace(/\D/g, '');

        resDiv.style.display = "block";
        resDiv.style.background = "#eee";
        resDiv.style.color = "#333";
        resDiv.innerHTML = "Aguarde, consultando...";

        try {
            const urlFinal = `${SCRIPT_URL}?nome=${encodeURIComponent(nome)}&cpf=${encodeURIComponent(cpfApenasNumeros)}`;
            const response = await fetch(urlFinal);
            const dados = await response.json();

            if (dados.status === "sucesso") {
                resDiv.style.background = "#d4edda";
                resDiv.style.color = "#155724";
                resDiv.innerHTML = `
                    <strong>Olá, ${dados.nome}!</strong><br>
                    O valor do seu RPV será: <strong>${dados.saldo}</strong><br>
                    <small>(Acrescer juros e correção monetária de cerca de 50%)</small>
                    
                    <div class="filiacao-box">
                        Se ainda não é filiado, filie-se para fortalecer o seu sindicato e adiantar a sua execução em: <br>
                        <a href="https://sintrajud.org.br/sindicalize-se" target="_blank">sintrajud.org.br/sindicalize-se</a>
                    </div>
                `;
            } else {
                resDiv.style.background = "#f8d7da";
                resDiv.style.color = "#721c24";
                resDiv.innerHTML = "Os dados informados não foram encontrados.";
            }
        } catch (e) {
            resDiv.style.background = "#fff3cd";
            resDiv.style.color = "#856404";
            resDiv.innerHTML = "Erro ao conectar com o servidor. Tente novamente.";
        }
    }

    function limpar() {
        document.getElementById('nome').value = "";
        document.getElementById('cpf').value = "";
        const resDiv = document.getElementById('res');
        resDiv.style.display = "none";
        resDiv.innerHTML = "";
    }
</script>
</body>

</html>
